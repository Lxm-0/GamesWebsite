<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MGames - Games List</title>
    <link rel="stylesheet" href="../src/style.css" />
    <style>
      body {
        min-height: 100vh;
        margin: 0;
        padding: 20px;
        font-family: Arial, sans-serif;
      }

      .games-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .game-card {
        background: rgba(255, 255, 255, 0.544);
        border-top: 1px solid rgba(240, 248, 255, 0.4);
        border-left: 1px solid rgba(240, 248, 255, 0.3);
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
        text-align: center;
      }

      .game-card:hover {
        transform: translateY(-5px);
      }

      .game-card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
        background: #f0f0f0;
      }

      .game-card h3 {
        margin: 15px 0 10px;
        color: #333;
      }

      .game-card p {
        color: #d6d3d3;
        font-size: 14px;
        line-height: 1.5;
        margin-bottom: 15px;
      }

      .game-card button {
        background: linear-gradient(135deg, #156a84 0%, #13899b 100%);
        color: aliceblue;
        border: none;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        transition: opacity 0.3s;
      }

      .game-card button:hover {
        opacity: 0.9;
        background: linear-gradient(135deg, #2588a6 0%, #34a9ba 100%);
      }
    </style>
  </head>
  <body>
    <div class="games-container">
      <div class="game-card">
        <img src="../public/Sonicpic.png" alt="Platform Game" />
        <h3>سونيك</h3>
        <p>
          لعبة سونيك ممتعة تتطلب مهارة وتركيز. تحكم بالشخصية وتجاوز العقبات كلما
          زادت السرعه.
        </p>
        <button id="btnPlatform">العب</button>
      </div>
      <div class="game-card">
        <img src="../public/Master.png" alt="metro Game" />
        <h3>زعيم ميترو</h3>
        <p>
          لعبة بلاتفورم تتطلب قتل الاعداء واكمال المهام . تحكم بالشخصية واقتل
          العقبات كلما زادت الصعوبه.
        </p>
        <button id="btnmetrodivaniaMaster">العب</button>
      </div>

      <div class="game-card">
        <img
          src="../public/Dragon.png"
          alt="interactive dragon"
        />
        <h3>دراجون سلايدر</h3>
        <p>
          لعبه لتطبيق مفهوم الاحداث في جافا سكريبت
        </p>
        <button id="btnDragon">العب</button>
      </div>

      <div class="game-card">
        <img
          src="https://via.placeholder.com/300x200/2196F3/FFFFFF?text=Memory"
          alt="Memory Game"
        />
        <h3>ذاكرة</h3>
        <p>اختبر ذاكرتك في هذه اللعبة الكلاسيكية. ابحث عن الصور المتطابقة.</p>
        <button id="btnMemory">العب</button>
      </div>

      <div class="game-card">
        <img
          src="https://via.placeholder.com/300x200/FF9800/FFFFFF?text=Card"
          alt="Card Game"
        />
        <h3>ورق</h3>
        <p>
          لعبة ورق تقليدية. قارن أوراقك وتحدى خصومك في هذه اللعبة الاستراتيجية.
        </p>
        <button id="btnCard">العب</button>
      </div>
    </div>

    <script type="module">
      import { openGame } from "../src/router.js";

      // Add debug logs
      console.log("Games.html script running");
      console.log("Parent:", window.parent);
      console.log(
        "Parent loadPage exists:",
        window.parent && window.parent.loadPage
      );

      // Add event listeners when page loads
      document.addEventListener("DOMContentLoaded", () => {
        console.log("Games.html DOM loaded");

        const btnPlatform = document.getElementById("btnPlatform");
        const btnmetrodivaniaMaster = document.getElementById(
          "btnmetrodivaniaMaster"
        );
        const btnPuzzle = document.getElementById("btnDragon");
        const btnMemory = document.getElementById("btnMemory");
        const btnCard = document.getElementById("btnCard");

        if (btnPlatform) {
          btnPlatform.addEventListener("click", () => {
            console.log("Platform button clicked");
            openGame("platform");
          });
        }
        if (btnmetrodivaniaMaster) {
          btnmetrodivaniaMaster.addEventListener("click", () => {
            console.log("Platform button clicked");
            openGame("metrodivaniaMaster");
          });
        }

        if (btnDragon) {
          btnDragon.addEventListener("click", () => {
            console.log("Puzzle button clicked");
            openGame("interactive dragon");
          });
        }

        if (btnMemory) {
          btnMemory.addEventListener("click", () => {
            console.log("Memory button clicked");
            openGame("memory");
          });
        }

        if (btnCard) {
          btnCard.addEventListener("click", () => {
            console.log("Card button clicked");
            alert("هذه اللعبة قيد التطوير");
          });
        }

        // Save state to parent
        try {
          if (window.parent) {
            console.log("Saving state to parent");
            window.parent.localStorage.setItem(
              "currentPage",
              "public/Games.html"
            );
            window.parent.localStorage.setItem("welcomeHidden", "true");
          }
        } catch (e) {
          console.log("Could not save to parent:", e);
        }
      });
    </script>
  </body>
</html>
