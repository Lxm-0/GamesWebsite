<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MGames - Games List</title>
  <link rel="stylesheet" href="./style.css" />
  <style>
    body {
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
    }

    .games-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      max-width: 1150px;
      margin: 0 auto;
      padding: 10px;
      overflow: hidden;
    }

    .game-card {
      background: rgba(255, 255, 255, 0.544);
      border-top: 1px solid rgba(240, 248, 255, 0.4);
      border-left: 1px solid rgba(240, 248, 255, 0.3);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s;
      text-align: center;
    }

    .game-card:hover {
      transform: translateY(-5px);
    }

    .game-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      background: #f0f0f0;
    }

    .game-card h3 {
      margin: 15px 0 10px;
      color: #333;
    }

    .game-card p {
      color: #d6d3d3;
      font-size: 14px;
      line-height: 1.5;
      margin-bottom: 15px;
    }

    /* ูุฐุง ุงูุชูุณูู ุณูุทุจู ุนูู ุงูุฃุฒุฑุงุฑ ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ ููุฑุงู */
    .game-card button {
      background: linear-gradient(135deg,
          #156a84 0%,
          #13899b 100%) !important;
      color: aliceblue !important;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s ease;
      display: inline-block;
      width: auto;
      /* ูุถูุงู ุนุฏู ุชูุฏุฏู ุจุดูู ุบุฑูุจ */
      min-width: 120px;
    }

    .game-card button:hover {
      opacity: 0.9;
      transform: scale(1.05);
      background: linear-gradient(135deg,
          #2588a6 0%,
          #34a9ba 100%) !important;
    }
  </style>
</head>

<body>
  <div class="games-container">
    <div class="game-card">
      <img src="../public/MainImages/Sonicpic.png" alt="Platform Game" />
      <h3>ุณูููู</h3>
      <p>
        ูุนุจุฉ ุณูููู ููุชุนุฉ ุชุชุทูุจ ููุงุฑุฉ ูุชุฑููุฒ. ุชุญูู ุจุงูุดุฎุตูุฉ ูุชุฌุงูุฒ ุงูุนูุจุงุช ูููุง
        ุฒุงุฏุช ุงูุณุฑุนู.
      </p>
      <button id="btnPlatform">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/Master.png" alt="metro Game" />
      <h3>ุฒุนูู ููุชุฑู</h3>
      <p>
        ูุนุจุฉ ุจูุงุชููุฑู ุชุชุทูุจ ูุชู ุงูุงุนุฏุงุก ูุงููุงู ุงูููุงู . ุชุญูู ุจุงูุดุฎุตูุฉ ูุงูุชู
        ุงูุนูุจุงุช ูููุง ุฒุงุฏุช ุงูุตุนูุจู.
      </p>
      <button id="btnmetrodivaniaMaster">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/Dragon.png" alt="interactive dragon" />
      <h3>ุฏุฑุงุฌูู ุณูุงูุฏุฑ</h3>
      <p>ูุนุจู ูุชุทุจูู ููููู ุงูุงุญุฏุงุซ ูู ุฌุงูุง ุณูุฑูุจุช</p>
      <button id="btnDragon">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/pacman.png" alt="Pac Man Master" />
      <h3>ุจุงู ูุงู</h3>
      <p>
        ุณุงุนุฏ ุจุงู ูุงู ูู ุฃูู ุงูููุงุท ูุงููุฑูุจ ูู ุงูุฃุดุจุงุญ ูู ุงููุชุงูุฉ ุงูููุงุณูููุฉ!
      </p>
      <button id="btnpacman">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/samurai.png" alt="Samurai fight" />
      <h3>ูุชุงู ุณุงููุฑุงู</h3>
      <p>
        ุงูุบูุณ ูู ุนุงูู ุงูููุฉ! ุงุฎุชุจุฑ ููุงุฑุงุชู ูู ุงููุชุงู ุงูุณุฑูุนุ ูุงุฌู ุฎุตููู ุจุณููู
        ุงููุงุชุงูุงุ ููู ุงูุณุงููุฑุงู ุงูุฃุฎูุฑ ุงูุตุงูุฏ.
      </p>
      <button id="btnfighting">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/towerdefens.png" alt="Tower Defense" />
      <h3>ุงูุฏูุงุน ุนู ุงูููุนู</h3>
      <p>
        ูุนุจุฉ ุงุณุชุฑุงุชูุฌูุฉ ูุซูุฑุฉ! ุงุจูู ุฃุจุฑุงุฌู ุงูุฏูุงุนูุฉุ ุฎุทุท ููุณุงุฑ ุฃุนุฏุงุฆูุ ูุงุญูู
        ููุนุชู ูู ุงููุฌูุงุช ุงููุชุชุงููุฉ.
      </p>
      <button id="btntower">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/sunnyland.png" alt="Samurai fight" />
      <h3>ูุงุฑูู</h3>
      <p>
        ุงูุทูู ูู ูุบุงูุฑุฉ ููุงุณูููุฉ! ุงููุฒ ููู ุงูุนูุจุงุชุ ุงุฌูุน ุงููููุฒุ ูุงุณุชูุดู
        ุงูุนูุงูู ุงูููููุฉ ูู ูุฐู ุงููุนุจุฉ ุงูููุชุนุฉ.
      </p>
      <button id="btnsouunyland">ุงูุนุจ</button>
    </div>

    <div class="game-card">
      <img src="../public/MainImages/fish.png" style="width: 100%; height: 200px; object-fit: cover" alt="fish Game" />
      <h3>ูุนุจุฉ ุงูุงุณูุงู</h3>
      <p>
        ุงุณุชูุชุน ุจูุบุงูุฑุฉ ุชุญุช ุงูุจุญุงุฑุุชุญูู ุจุงูุณููู ูุชุฌูุจ ุงูุฅุตุทุฏุงู ุจุงูุนูุจุงุช ูุฌูุน
        ุงูุจุฑ ูุฏุฑ ูู ุงูููุงุท
      </p>
      <button id="btnfishgame">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/piano.png" alt="pianoGame" />
      <h3>ุจูุงูู</h3>
      <p>
        ูุบุงูุฑุฉ ููุณูููู ููุงุณูููู ููููู ุงูููุฒ ููู ุงูุนูุจุงุช ุงูููุณูููุฉ ูุฌูุน ุงููููุฒ
        ุงููุฎููู ูู ุนุงูู ุงูุงูุญุงู
      </p>
      <button id="btnpiano">ุงูุนุจ</button>
    </div>

    <div class="game-card">
      <img src="../public/MainImages/MemoryMatching.png" alt="MemorMatchingGame" />
      <h3>ุฐุงูุฑุฉุงูุฌูุงูุฑ</h3>
      <p>
        ุงูุบูุณ ูู ุนุงูู ูู ุงูุฌูุงูุฑ ุงููุชูุฃูุฆู ูุญุงูู ูุดู ุงูุฃุฒูุงุฌ ุงููุชุทุงุจูู ูุจู
        ููุงุช ุงูุฃูุงู
      </p>
      <button id="btnMemoryMaching">ุงูุนุจ</button>
    </div>

    <div class="game-card">
      <img src="../public/MainImages/spaceship.png" alt="spaceGame" />
      <h3>ูุชุงู ุงููุฌุฑู</h3>
      <p>
        ูู ูุฏูู ุงูุดุฌุงุนุฉ ูููุงุฏุฉ ูุฑูุจุชู ูุณุท ูุงุจู ุงูุงุนุฏุงุก ุฏูุงุน ุงุณุชุฑุงุชูุฌู ูุซูุฑ
        ุจุซูุงุซ ูุฑุต ููุจูุงุก ุนูู ููุฏ ุงูุญูุงู ูุฌูุน ุงูููุงุท ุจูุชู ุนุฏูู
      </p>
      <button id="btnspacegame">ุงูุนุจ</button>
    </div>

    <div class="game-card">
      <img src="../public/MainImages/breakoutship.png" alt="breakoutGame" />
      <h3>ูุนุจุฉ ุชุญุทูู ุงูุทูุจ</h3>
      <p>
        ุฏูุฑ ุฌููุน ุงูุทูุจ ูููู ุงูุงูู ุงู ุชุฑูุฒ ูุธุฑู ุนูู ูุณุงุฑ ุงููุฑุฉ ูุชููุน ุงูู ุณุชุณูุท
        ููู ุชุชููู ูู ุตุฏูุง ุนู ุงูุณููุท ููุง ุชุฎุณุฑ ููุงุทู ุงุณุชุฎุฏู ุงูุงุณูู
      </p>
      <button id="btnbreakout">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/Tic-Tac-Toe.png" alt="X-O-Game" />
      <h3>ูุนุจุฉX-O</h3>
      <p>
        ุตุฑุงุน ุงูุนููู ูู ุชุณุนุฉ ูุฑุจุนุงุชุุญูุซ ุชุถุน ุนุฏูู ูู ูุฎ ุงูููุงุดุฉ ูุชุฌุจุฑู ุนูู
        ูุดุงูุฏุฉ ูุฒููุชู ูุจู ุญุฏูุซูุง
      </p>
      <button id="btnXO">ุงูุนุจ</button>
    </div>

    <div class="game-card">
      <img src="../public/MainImages/car.png" alt="Car-Rsce-Game" />
      <h3>ุณูุงุฑุงุช ุณุจุงู</h3>
      <p>
        ุฒุฏ ุงูุณุฑุนู ุชูุงุฏู ุงูุนูุจุงุช ูุณูุทุฑ ุนูู ุงูุทุฑูู ููุงูุณุฉ ุดุฑุณุฉ ูุงูุช ูุญุฏู ุงููุชุญูู
        ุจุงูููุฒ ูุงูุฎุณุงุฑู
      </p>
      <button id="btncar">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/Dice.jpg" alt="Dice Game" />
      <h3>ูุนุจุฉ ุงููุฑุฏ</h3>
      <p>
        ุชุญุฏู ุญุธู ูู ูุนุจุฉ ุงููุฑุฏ ุงููุซูุฑุฉ! ุงุฑูู ุงููุฑุฏุ ุงุฌูุน ุงูููุงุทุ ููู ุงููุงุฆุฒ ูู
        ูุฐู ุงููุนุจุฉ ุงูููุงุณูููุฉ ุงูููุชุนุฉ.
      </p>
      <button id="btnDic">ุงูุนุจ</button>
    </div>

    <div class="game-card">
      <img src="../public/MainImages/arch.jpeg" alt="Archery-Game" />
      <h3>ุงูุณูู ูุงูููุณ</h3>
      <p>
        ูู ุงูุช ููุงุต ุจุงููุทุฑุฉ โฝุชุญุฏู ุงููุฏูุก ุงููุงุชู ุงููุนุจู ููุณุช ูุฌุฑุฏ ุฅุทูุงู ุณูุงู ุจู
        ูู ูุนุฑูู ูุน ุงูุฒูู ูุงูููุฒูุงุก ุญูุซ ุซุจุงุช ูุฏู ูุชูููุชู ููุง ุงููุงุฑู ุจูู
        ุงูุงูุตุงุจู ุงูุฐูุจูู ูุถูุงุน ุงูุณูู ูู ุงููุฑุงุบ
      </p>
      <button id="btnarchery">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/billionare.png" alt="ูุนุจุฉ ูู ุณูุฑุจุญ ุงูููููู" />
      <h3>ูุนุจุฉ ูู ุณูุฑุจุญ ุงูููููู</h3>
      <p>
        ุงุฎุชุจุฑ ูุนูููุงุชู ุงูุนุงูุฉ ูู ูุนุจุฉ ูู ุณูุฑุจุญ ุงูููููู! ุฃุฌุจ ุนูู ุงูุฃุณุฆูุฉ
        ุงููุชููุนุฉุ ูุงุณุชุฎุฏู ูุณุงุฆู ุงููุณุงุนุฏุฉุ ูุญูู ุงูููุฒ ุจุงูุฌุงุฆุฒุฉ ุงููุจุฑู.
      </p>
      <button id="btnbillionare">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/PatientSymptom.png" alt="ูุนุจุฉ ูู ุณูุฑุจุญ ุงูููููู" />
      <h3>ูุนุจุฉ ูุญุงูุงุฉ ุนูุงุฏุฉ ุงูุทูุงุฑุฆ</h3>
      <p>
        ุงุฎุชุจุฑ ููุงุฑุงุชู ุงูุทุจูุฉ ูู ูุนุจุฉ ูุญุงูุงุฉ ุนูุงุฏุฉ ุงูุทูุงุฑุฆ! ูู ุจุชุดุฎูุต ูุนูุงุฌ
        ุงููุฑุถู ูู ููุงูู ุทุงุฑุฆุฉ ูุงูุนูุฉ. ูู ููููู ุฅููุงุฐ ุงูุฃุฑูุงุญ ุชุญุช ุงูุถุบุทุ
      </p>
      <button id="btnPatientSymptom">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/ุงููุชุณูู.png" alt="platformer-wallclimbing-Game" />
      <h3>ูุชุณูู ุงูุฌุฏุฑุงู</h3>
      <p>
        ุชุญุฏู ุงูุฌุฏุฑุงูุุงุฑุจุญ ุงูููู! ููุฒุงุช ุณุฑูุนู ุููุฎุงุฎ ููุงุฌุฆู! ูู ุชุณุชุทูุน ุงููุตูู
        ููููู ูุชุญููู ุงุนูู ุงูููุงุทุ
      </p>
      <button id="btnplatformer">ุงูุนุจ</button>
    </div>
    <div class="game-card">
      <img src="../public/MainImages/Pong.jpg" alt="Pong Game" />
      <h3>ูุนุจุฉ ุงูุชูุณ</h3>
      <p>
        ุงุณุชูุชุน ุจูุนุจุฉ ุงูุชูุณ ุงูููุงุณูููุฉ! ุชุญูู ุจุงููุถุฑุจุ ุฑุฏ ุงููุฑุฉุ ูุณุฌู ุงูููุงุท ุถุฏ
        ุฎุตูู ูู ูุจุงุฑุงุฉ ูุซูุฑุฉ. ูู ุถุฑุจุฉ ูู ููุณูููุ ููู ูุฑุฉ ูุตุฉุ ููู ููุทุฉ ูุนุฑูุฉ
        ูุตูุฑูุฉ. ๐พ
      </p>
      <button id="btnPong">ุงูุนุจ</button>
    </div>

    <div class="game-card">
      <img src="../public/MainImages/viking.jpg" alt="vikingIcon" />
      <h3>Vaikning</h3>
      <p>
        ูุณุงุฑ ุงููุฑุฉ ูุชููุน ุงูู ุณุชุณูุท
        ููู ุชุชููู ูู ุตุฏูุง ุนู ุงูุณููุท ููุง ุชุฎุณุฑ ููุงุทู ุงุณุชุฎุฏู ุงูุงุณูู
      </p>
      <button id="btnViking">ุงูุนุจ</button>
    </div>


    <div id="dynamicGamesContainer" class="games-container"></div>
  </div>

  <script type="module">
    import { openGame } from "./router.js";

    // --- ุงูุฌุฒุก ุงูุฃูู: ุฌูุจ ุงูุฃูุนุงุจ ุงูุฏููุงููููุฉ ---
    async function loadDynamicGames() {
      try {
        // Use relative path for production/apache, or proxy for vite
        const isVite = window.location.port === "5173";
        const apiUrl = isVite
          ? "/TheGBackend/api/get_games.php"
          : "../../../TheGBackend/api/get_games.php";

        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error("Failed to fetch");
        const games = await response.json();

        const container = document.querySelector(".games-container");
        games.forEach((game) => {
          const card = document.createElement("div");
          card.className = "game-card";
          card.innerHTML = `
        <img src="${game.game_image_path}" alt="${game.title}" />
        <h3>${game.title}</h3>
        <p>${game.description}</p>
        <button class="dyn-btn">ุงูุนุจ ุงูุขู</button>
    `;

          card.querySelector(".dyn-btn").addEventListener("click", () => {
            // ูุฑุณู true ูุฃู ูุฐุง ูุณุงุฑ ูุจุงุดุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
            openGame(game.game_file_path, true);
          });

          container.appendChild(card);
        });
      } catch (error) {
        console.error("ุฎุทุฃ ูู ุฌูุจ ุงูุฃูุนุงุจ:", error);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadDynamicGames();

      // ูุณุชูุนุงุช ุงูุฃุญุฏุงุซ ููุฃุฒุฑุงุฑ ุงููุฏููุฉ (ุจููุณ ุทุฑููุชู)
      const buttonsMap = {
        btnPlatform: "platform",
        btnmetrodivaniaMaster: "metrodivaniaMaster",
        btnDragon: "interactive dragon",
        btnpacman: "pacman",
        btnfighting: "Fighting game",
        btntower: "tower defense",
        btnsouunyland: "sounnyland",
        btnfishgame: "fishgame",
        btnpiano: "piano",
        btnMemoryMaching: "MemoryMatching",
        btnspacegame: "Space-Shooter-master",
        btnbreakout: "Breakout-Game",
        btnXO: "Tic-Tac-Toe",
        btncar: "Car-Race-master",
        btnarchery: "Archery-game-master",
        btnDic: "Dice Game",
        btnbillionare: "billionare",
        btnPatientSymptom: "PatientSymptom",
        btnplatformer: "WallClimber",
        btnPong: "Ping Pong Game",
        btnViking: "Vikning Game"
      };

      Object.keys(buttonsMap).forEach((id) => {
        const btn = document.getElementById(id);
        if (btn) {
          btn.addEventListener("click", () => openGame(buttonsMap[id]));
        }
      });

      // ุญูุธ ุญุงูุฉ ุงูุตูุญุฉ ูู ุงูู localStorage
      try {
        if (window.parent) {
          window.parent.localStorage.setItem(
            "currentPage",
            "Games.html",
          );
          window.parent.localStorage.setItem("welcomeHidden", "true");
        }
      } catch (e) {
        console.error("LocalStorage Error:", e);
      }
    });
  </script>
</body>

</html>